<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Generate beautiful JSON from PostgreSQL</title>
        <meta name="description" content="thoughts, obsessions and mostly rants">
        <meta name="author" content="Rudra Narayan">

        
        <link rel="stylesheet" href="https://notes.rudra.dev/scss/main.min.3ca196ab468b37c0fc58ca7e22dd30f77e15a6c8ae71460ed2600601722919f0.css" media="screen">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

        

    </head>
    <body>
        <div class="layout">
            <header>
	
	<div class="title-wrapper">
		<a href="/">
			<h2 class="title">rudra narayan</h2>
		</a>
		<nav>
			<ul>
				<li><a href="/posts/">posts</a></li>
				<li><a href="/projects/">projects</a></li>
				<li><a href="/resume/" target="_blank" >resume</a></li>
			</ul>
		</nav>
	</div>
	

	
</header>

            
	<main>
		<article>
			<h1>Generate beautiful JSON from PostgreSQL</h1>

			
				<time>May 19, 2020</time>
			

			

			
			<div class="tags">
				<ul>
					
					<li><a href="/tags/postgresql">postgresql</a></li>
					
					<li><a href="/tags/json">json</a></li>
					
					<li><a href="/tags/sql">sql</a></li>
					
				</ul>
			</div>
			

			<div class="blog-post-content">
				<p>PostgreSQL provides a set of built-in <a href="https://www.postgresql.org/docs/current/functions-json.html#FUNCTIONS-JSON-CREATION-TABLE" target="_blank">JSON
creation functions</a>
 that can be used to build basic JSON structures. This increases the performance up to 10 times more than building it at the back-end layer.</p>
<blockquote>
<p>This post is about building different JSON structures using PostgreSQL
built-in functions. It doesn&rsquo;t talk about storing and manipulating
JSON in PostgreSQL.</p>
</blockquote>
<p>In order to proceed with some examples, first we need to setup a test
database.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">CREATE</span> <span style="color:#080;font-weight:bold">DATABASE</span> jsonland
</code></pre></div><p>Let&rsquo;s create the following tables.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">CREATE</span> <span style="color:#080;font-weight:bold">TABLE</span> <span style="background-color:#fff0f0">&#34;user&#34;</span> (
    id <span style="color:#007020">SERIAL</span> <span style="color:#080;font-weight:bold">NOT</span> <span style="color:#080;font-weight:bold">NULL</span>,
    name <span style="color:#007020">VARCHAR</span>(<span style="color:#00d;font-weight:bold">100</span>),
    email_address <span style="color:#007020">VARCHAR</span>(<span style="color:#00d;font-weight:bold">150</span>),
    <span style="color:#080;font-weight:bold">PRIMARY</span> <span style="color:#080;font-weight:bold">KEY</span>(id)
  )

  <span style="color:#080;font-weight:bold">CREATE</span> <span style="color:#080;font-weight:bold">TABLE</span> team (
    id <span style="color:#007020">SERIAL</span> <span style="color:#080;font-weight:bold">NOT</span> <span style="color:#080;font-weight:bold">NULL</span>,
    name <span style="color:#007020">VARCHAR</span>(<span style="color:#00d;font-weight:bold">100</span>),
    <span style="color:#080;font-weight:bold">PRIMARY</span> <span style="color:#080;font-weight:bold">KEY</span>(id)
  )

  <span style="color:#080;font-weight:bold">CREATE</span> <span style="color:#080;font-weight:bold">TABLE</span> team_user (
    id <span style="color:#007020">SERIAL</span> <span style="color:#080;font-weight:bold">NOT</span> <span style="color:#080;font-weight:bold">NULL</span>,
    team_id <span style="color:#007020">INTEGER</span> <span style="color:#080;font-weight:bold">NOT</span> <span style="color:#080;font-weight:bold">NULL</span>,
    user_id <span style="color:#007020">INTEGER</span> <span style="color:#080;font-weight:bold">NOT</span> <span style="color:#080;font-weight:bold">NULL</span>,
    <span style="color:#080;font-weight:bold">FOREIGN</span> <span style="color:#080;font-weight:bold">KEY</span>(team_id) <span style="color:#080;font-weight:bold">REFERENCES</span> <span style="background-color:#fff0f0">&#34;team&#34;</span> (id),
    <span style="color:#080;font-weight:bold">FOREIGN</span> <span style="color:#080;font-weight:bold">KEY</span>(user_id) <span style="color:#080;font-weight:bold">REFERENCES</span> <span style="background-color:#fff0f0">&#34;user&#34;</span> (id),
    <span style="color:#080;font-weight:bold">PRIMARY</span> <span style="color:#080;font-weight:bold">KEY</span>(id)
  )
</code></pre></div><p>Let&rsquo;s Seed the tables with random data.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">INSERT</span> <span style="color:#080;font-weight:bold">INTO</span> <span style="background-color:#fff0f0">&#34;team&#34;</span> (<span style="background-color:#fff0f0">&#34;id&#34;</span>, <span style="background-color:#fff0f0">&#34;name&#34;</span>)
  <span style="color:#080;font-weight:bold">VALUES</span> (<span style="color:#00d;font-weight:bold">1</span>, <span style="background-color:#fff0f0">&#39;team1&#39;</span>), (<span style="color:#00d;font-weight:bold">2</span>, <span style="background-color:#fff0f0">&#39;team2&#39;</span>);

  <span style="color:#080;font-weight:bold">INSERT</span> <span style="color:#080;font-weight:bold">INTO</span> <span style="background-color:#fff0f0">&#34;user&#34;</span> (<span style="background-color:#fff0f0">&#34;id&#34;</span>, <span style="background-color:#fff0f0">&#34;name&#34;</span>, <span style="background-color:#fff0f0">&#34;email_address&#34;</span>)
  <span style="color:#080;font-weight:bold">VALUES</span> (<span style="color:#00d;font-weight:bold">1</span>, <span style="background-color:#fff0f0">&#39;user1&#39;</span>, <span style="background-color:#fff0f0">&#39;user1@mail.com&#39;</span>), (<span style="color:#00d;font-weight:bold">2</span>, <span style="background-color:#fff0f0">&#39;user2&#39;</span>, <span style="background-color:#fff0f0">&#39;user2@mail.com&#39;</span>);

  <span style="color:#080;font-weight:bold">INSERT</span> <span style="color:#080;font-weight:bold">INTO</span> <span style="background-color:#fff0f0">&#34;team_user&#34;</span> (<span style="background-color:#fff0f0">&#34;id&#34;</span>, <span style="background-color:#fff0f0">&#34;team_id&#34;</span>, <span style="background-color:#fff0f0">&#34;user_id&#34;</span>)
  <span style="color:#080;font-weight:bold">VALUES</span> (<span style="color:#00d;font-weight:bold">1</span>, <span style="color:#00d;font-weight:bold">1</span>, <span style="color:#00d;font-weight:bold">1</span>), (<span style="color:#00d;font-weight:bold">2</span>, <span style="color:#00d;font-weight:bold">1</span>, <span style="color:#00d;font-weight:bold">2</span>), (<span style="color:#00d;font-weight:bold">3</span>, <span style="color:#00d;font-weight:bold">2</span>, <span style="color:#00d;font-weight:bold">2</span>);
</code></pre></div><p>We have created three tables i.e. <code>team</code>, <code>user</code> and <code>team_user</code>.
<code>team_user</code> table maps one-to-may the relationship between users and
teams.</p>
<h2 id="1-get-the-table-data-as-json-objects"><strong>1. Get the table data as JSON objects</strong></h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">SELECT</span> row_to_json(<span style="background-color:#fff0f0">&#34;user&#34;</span>) <span style="color:#080;font-weight:bold">FROM</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>;

  <span style="color:#333">+</span><span style="color:#888">-----------------------------------------------------------+
</span><span style="color:#888"></span>  <span style="color:#333">|</span> row_to_json                                               <span style="color:#333">|</span>
  <span style="color:#333">|</span><span style="color:#888">-----------------------------------------------------------|
</span><span style="color:#888"></span>  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">1</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user1&#34;</span>,<span style="background-color:#fff0f0">&#34;email_address&#34;</span>:<span style="background-color:#fff0f0">&#34;user1@gmail.com&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">2</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user2&#34;</span>,<span style="background-color:#fff0f0">&#34;email_address&#34;</span>:<span style="background-color:#fff0f0">&#34;user2@gmail.com&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">+</span><span style="color:#888">-----------------------------------------------------------+
</span></code></pre></div><p>The above mentioned query will return all the columns of each row as
JSON objects.</p>
<h2 id="2-get-the-table-data-with-specific-columns"><strong>2. Get the table data with specific columns</strong></h2>
<p>We can specify the particular columns we need rather than getting all at
once.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">SELECT</span> row_to_json(<span style="color:#080;font-weight:bold">row</span>(<span style="background-color:#fff0f0">&#39;id&#39;</span>, <span style="background-color:#fff0f0">&#39;name&#39;</span>)) <span style="color:#080;font-weight:bold">FROM</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>;

  <span style="color:#333">+</span><span style="color:#888">-------------------------+
</span><span style="color:#888"></span>  <span style="color:#333">|</span> row_to_json             <span style="color:#333">|</span>
  <span style="color:#333">|</span><span style="color:#888">-------------------------|
</span><span style="color:#888"></span>  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;f1&#34;</span>:<span style="background-color:#fff0f0">&#34;id&#34;</span>,<span style="background-color:#fff0f0">&#34;f2&#34;</span>:<span style="background-color:#fff0f0">&#34;name&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;f1&#34;</span>:<span style="background-color:#fff0f0">&#34;id&#34;</span>,<span style="background-color:#fff0f0">&#34;f2&#34;</span>:<span style="background-color:#fff0f0">&#34;name&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">+</span><span style="color:#888">-------------------------+
</span></code></pre></div><p>Now certainly the keys <code>f1</code> and <code>f2</code> in the objects are not very useful
to us. We would rather want the column names instead of those keys.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">SELECT</span> row_to_json(users) <span style="color:#080;font-weight:bold">FROM</span> (<span style="color:#080;font-weight:bold">SELECT</span> id, name <span style="color:#080;font-weight:bold">FROM</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>) <span style="color:#080;font-weight:bold">AS</span> users;

  <span style="color:#333">+</span><span style="color:#888">-------------------------+
</span><span style="color:#888"></span>  <span style="color:#333">|</span> row_to_json             <span style="color:#333">|</span>
  <span style="color:#333">|</span><span style="color:#888">-------------------------|
</span><span style="color:#888"></span>  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">1</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user1&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">|</span> <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">2</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user2&#34;</span><span style="color:#f00;background-color:#faa">}</span> <span style="color:#333">|</span>
  <span style="color:#333">+</span><span style="color:#888">-------------------------+
</span></code></pre></div><h2 id="3-get-the-table-data-as-a-single-json-object"><strong>3. Get the table data as a single JSON object</strong></h2>
<p>The above examples return us multiple JSON objects(one for each row).
Ideally we would want a single array of these objects which won&rsquo;t need
any further manipulation at back-end layer.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">SELECT</span> array_to_json(array_agg(row_to_json(users)))
      <span style="color:#080;font-weight:bold">FROM</span> (
          <span style="color:#080;font-weight:bold">SELECT</span> id, name <span style="color:#080;font-weight:bold">from</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>
      ) users

  <span style="color:#888">-- OR
</span><span style="color:#888"></span>
  <span style="color:#080;font-weight:bold">SELECT</span> json_agg(row_to_json(users))
      <span style="color:#080;font-weight:bold">FROM</span> (
          <span style="color:#080;font-weight:bold">SELECT</span> id, name <span style="color:#080;font-weight:bold">from</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>
      ) users

  <span style="color:#333">+</span><span style="color:#888">----------------------------------------------------+
</span><span style="color:#888"></span>  <span style="color:#333">|</span> json_agg                                           <span style="color:#333">|</span>
  <span style="color:#333">|</span><span style="color:#888">----------------------------------------------------|
</span><span style="color:#888"></span>  <span style="color:#333">|</span> [<span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">1</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user1&#34;</span><span style="color:#f00;background-color:#faa">}</span>, <span style="color:#f00;background-color:#faa">{</span><span style="background-color:#fff0f0">&#34;id&#34;</span>:<span style="color:#00d;font-weight:bold">2</span>,<span style="background-color:#fff0f0">&#34;name&#34;</span>:<span style="background-color:#fff0f0">&#34;user2&#34;</span><span style="color:#f00;background-color:#faa">}</span>] <span style="color:#333">|</span>
  <span style="color:#333">+</span><span style="color:#888">----------------------------------------------------+
</span></code></pre></div><p>In the above query we are aggregating all the JSON objects and using
<code>array_agg</code> and then converting them to JSON by applying <code>array_to_json</code>
function.</p>
<p>Also we could do the yield the same results by using <code>json_agg</code>
function, which results into an object instead of JSON string.</p>
<h2 id="4-build-json-object-with-multiple-tables"><strong>4. Build JSON object with multiple tables</strong></h2>
<p>We can also build a new JSON object by using <code>json_build_object</code> and
specify the keys and values. Let&rsquo;s create an object that will contain
data from both team and user table.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">SELECT</span> json_build_object(
    <span style="background-color:#fff0f0">&#39;users&#39;</span>, (<span style="color:#080;font-weight:bold">SELECT</span> json_agg(row_to_json(<span style="background-color:#fff0f0">&#34;user&#34;</span>)) <span style="color:#080;font-weight:bold">from</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>),
    <span style="background-color:#fff0f0">&#39;teams&#39;</span>, (<span style="color:#080;font-weight:bold">SELECT</span> json_agg(row_to_json(<span style="background-color:#fff0f0">&#34;team&#34;</span>)) <span style="color:#080;font-weight:bold">from</span> <span style="background-color:#fff0f0">&#34;team&#34;</span>)
  )
</code></pre></div><p>This query generates a JSON structure that will have all the users and
teams each as arrays of objects.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">  {
    <span style="color:#070">&#34;users&#34;</span>: [
      {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;user1&#34;</span>,
        <span style="color:#070">&#34;email_address&#34;</span>: <span style="background-color:#fff0f0">&#34;user1@mail.com&#34;</span>
      },
      {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;user2&#34;</span>,
        <span style="color:#070">&#34;email_address&#34;</span>: <span style="background-color:#fff0f0">&#34;user2@mail.com&#34;</span>
      }
    ],
    <span style="color:#070">&#34;teams&#34;</span>: [
      {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;team1&#34;</span>
      },
      {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;team2&#34;</span>
      }
    ]
  }
</code></pre></div><h2 id="5-build-json-object-by-resolving-foreign-keys"><strong>5. Build JSON object by resolving foreign keys</strong></h2>
<p>We can generate JSON structures by resolving foreign key references and
joining multiple tables.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#080;font-weight:bold">select</span> json_agg(row_to_json(tu))
      <span style="color:#080;font-weight:bold">from</span> (
          <span style="color:#080;font-weight:bold">select</span> id, (
              <span style="color:#080;font-weight:bold">select</span> row_to_json(team) <span style="color:#080;font-weight:bold">from</span> team <span style="color:#080;font-weight:bold">where</span> team_user.team_id <span style="color:#333">=</span> team.id
          ) team, (
              <span style="color:#080;font-weight:bold">select</span> row_to_json(<span style="background-color:#fff0f0">&#34;user&#34;</span>) <span style="color:#080;font-weight:bold">from</span> <span style="background-color:#fff0f0">&#34;user&#34;</span> <span style="color:#080;font-weight:bold">where</span> team_user.user_id <span style="color:#333">=</span> <span style="background-color:#fff0f0">&#34;user&#34;</span>.id
          ) <span style="background-color:#fff0f0">&#34;user&#34;</span>
      <span style="color:#080;font-weight:bold">from</span> team_user
  ) tu
</code></pre></div><p>This query contains multiple sub-queries to generate a complex
structure. It resolved the references of <code>team_id</code> and <code>user_id</code> into
the corresponding row.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[
    {
      <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
      <span style="color:#070">&#34;team&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;team1&#34;</span>
      },
      <span style="color:#070">&#34;user&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;user1&#34;</span>,
        <span style="color:#070">&#34;email_address&#34;</span>: <span style="background-color:#fff0f0">&#34;user1@mail.com&#34;</span>
      }
    },
    {
      <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
      <span style="color:#070">&#34;team&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">1</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;team1&#34;</span>
      },
      <span style="color:#070">&#34;user&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;user2&#34;</span>,
        <span style="color:#070">&#34;email_address&#34;</span>: <span style="background-color:#fff0f0">&#34;user2@mail.com&#34;</span>
      }
    },
    {
      <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">3</span>,
      <span style="color:#070">&#34;team&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;team2&#34;</span>
      },
      <span style="color:#070">&#34;user&#34;</span>: {
        <span style="color:#070">&#34;id&#34;</span>: <span style="color:#00d;font-weight:bold">2</span>,
        <span style="color:#070">&#34;name&#34;</span>: <span style="background-color:#fff0f0">&#34;user2&#34;</span>,
        <span style="color:#070">&#34;email_address&#34;</span>: <span style="background-color:#fff0f0">&#34;user2@mail.com&#34;</span>
      }
    }
  ]
</code></pre></div><h2 id="conclusion"><strong>Conclusion</strong></h2>
<p>Even though PostgreSQL is almost always faster than the back-end
language based JSON generation, the query can get complex really quickly
as we have nested structures. As long as we understand the basic JSON
functions and sub-queries we can build almost any kind of structure
without stressing the back-end processes.</p>

			</div>
			
	</main>
	

            <footer>
	<div class="bottom-nav">
		<nav>
			<ul>
				<li><a href="/about/">about</a></li>
				<li><a href="/logs/">logs</a></li>
				<li><a href="/privacy/">privacy</a></li>
			</ul>
		</nav>
	</div>
	
</footer>

        </div>
    </body>

    <script>
     
     (function() {
         const links = document.querySelectorAll("nav a")
         const currentUrl = location.href

         for (const link of links) {
             if (location.href.split("/").length === 4 && link.href.endsWith("/posts/")) {
                 link.classList.add("active-link")
                 break;
             }

             if (link.href === currentUrl) {
                 link.classList.add("active-link")
             }
         }
     }())
    </script>

</html>
